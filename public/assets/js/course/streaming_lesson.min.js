const splitted_domain=window.location.href.split("/"),course_slug=splitted_domain[4],lesson_id=splitted_domain[5],timezone=moment.tz.guess();Vue.component(VueCountdown.name,VueCountdown),moment.locale("es"),window.addEventListener("load",e=>{vm.check_attendance(vm)});let vm=new Vue({vuetify:vuetify,el:"#full-learning-container",data:{drawer:!1,tab:null,nav_tab:null,loading:!1,join_loading:!1,already_joined:!1,skills_container:!1,resource_preview_dialog:!1,resource_preview_loading:!0,certified_approved_dialog:!1,certified_loading:!1,certified_url:"",requireCertifiedPaid:!1,selection:1,streaming_countdown:1e3,countdown_container:{},show_button:!1,meta:{},notifications:[],resources:[],resource_preview:{}},computed:{StartTime(){return this.meta.hasOwnProperty("streaming_date")?this.meta.streaming_date+" "+this.meta.streaming_time:""},ScreenHeight:()=>window.screen.height-35*window.screen.height/100},watch:{streaming_countdown(e){e<=18e5&&(this.show_button=!0)}},created(){this.initialize(),this.initializeLessonResources()},mounted(){},methods:{initialize(){var e=this,t=api_url+"course-lessons/get-meta-info/"+lesson_id;e.$http.get(t).then(t=>{t.body.length>0&&(t.body.forEach(t=>{e.meta[t.lesson_meta_name]=t.lesson_meta_val}),e.meta.hasOwnProperty("streaming_date")&&(countdown=e.getTimeDifference(e.StartTime),e.streaming_countdown=countdown<0?0:countdown,e.countdown_container=e.$refs.meeting_countdown))},e=>{})},initializeLessonResources(){var e=this,t=api_url+"media/get-lesson-resources/"+lesson_id;e.$http.get(t).then(t=>{t.body.length>0&&t.body.forEach((t,i)=>{t.loading=!1,t.percent_loading_active=!1,t.percent_loading=0,e.resources.push(t)})},e=>{})},transformSlotProps(e){const t={};return Object.entries(e).forEach(([e,i])=>{t[e]=i<10?`0${i}`:String(i)}),t},hideSkills(){this.skills_container=!1},getTimeDifference(e){var t=moment.tz.guess();return moment(e).tz(this.meta.streaming_timezone).diff(moment().tz(t).format())},formatDate:e=>moment(e).format("LLL"),replaceString:(e,t,i)=>e.replace(t,i),check_attendance(e){(function(){var t=moment.tz.guess(),i=moment(e.StartTime).tz(vm.$data.meta.streaming_timezone).diff(moment().tz(t).format()),n=i<-12e5;!e.already_joined&&n&&e.joinClass(),e.saveTimeInterval=setTimeout(arguments.callee,6e4)})()},joinClass(){var e=this,t=api_url+"lessons/join-class/"+lesson_id;e.$http.post(t,{slug:course_slug}).then(t=>{"success"==t.body.status&&(e.already_joined=!0,(t.body.data.hasOwnProperty("certified_url")&&""!==t.body.data.certified_url||t.body.data.hasOwnProperty("requireCertifiedPaid")&&2!=t.body.data.requireCertifiedPaid)&&(e.certified_url=t.body.data.certified_url,e.requireCertifiedPaid=t.body.data.requireCertifiedPaid,e.certified_approved_dialog=!0))},e=>{})},getExt(e){var t=e,i=t.split("/"),n=i[i.length-1].split(".");return n[1]},getExtIcon(e){var t=e,i=t.split("/"),n=i[i.length-1].split("."),a="";switch(n[1]){case"pdf":a="pdf";break;case"docx":case"doc":a="word";break;case"ppt":case"pptx":case"ppt":a="powerpoint";break;case"xls":a="excel";break;default:a="document"}return a},saveFile(e,t){var i=this;t=void 0===t?i:t;var n=e.substring(e.lastIndexOf("/")+1).split("?")[0];i.$http.get(e,{responseType:"blob",progress(e){e.lengthComputable&&(t.percent_loading_active=!0,t.percent_loading=e.loaded/e.total*100)}}).then(e=>{var t=document.createElement("a");t.href=window.URL.createObjectURL(e.body),t.download=n,t.style.display="none",document.body.appendChild(t),t.click(),delete t})}}});