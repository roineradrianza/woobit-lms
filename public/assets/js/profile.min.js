Vue.use(VueTelInputVuetify,{vuetify:vuetify});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{tab:null,nav_tab:null,sidebar_tab:url_params.get("tab"),birthdate_modal:null,image_btns:!1,image_upload_btn:!1,profile_container:!1,courses_container:!1,orders_container:!1,grades_container:!1,children_container:!1,main_container:!0,dialogOrderPreview:!1,loading:!1,avatar_loading:!1,edit_profile_loading:!1,my_courses_loading:!1,my_orders_loading:!1,new_courses_loading:!1,snackbar:!1,snackbar_timeout:4e3,selection:1,snackbar_text:"",telephone:"",alert:!1,alert_type:"",alert_message:"",preview_avatar_image:"",notifications:[],countries:[],country_states:[],coming_classes:[],my_courses:[],new_courses:[],orders:{items:[],headers:[{text:"ID",align:"start",value:"order_id"},{text:"Data",align:"start",value:"registered_at"},{text:"Suma",align:"start",value:"amount"},{text:"Metoda de plată",align:"start",value:"payment_method"},{text:"Stat",align:"start",value:"status"},{text:"Acțiune",value:"actions",align:"center",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{}},grades:{dialog:!1,loading:!1,headers:[{text:"Test",align:"start",value:"lesson_name"},{text:"Scor",align:"start",value:"score"},{text:"Stare",align:"center",value:"approved"},{text:"Acțiune",align:"center",value:"action"}],course:{},items:[],editedItem:{}},children:new Children({uid:uid}),profile:{first_name:"",last_name:"",email:"",birthdate:"",gender:"",country_selected:"",state_selected:"",password:"",meta:[]},validations:validations,genders:[{text:"Bărbat",value:"M"},{text:"Femeie",value:"F"}],password_confirm:""},computed:{full_name(){if(this.profile.hasOwnProperty("first_name")&&this.profile.hasOwnProperty("last_name"))return this.profile.first_name+" "+this.profile.last_name},teacher_gender(){return"F"==this.profile.gender?"Profesora":"Profesor"},location(){return this.profile.meta.country+", "+this.profile.meta.state},AmountInBs(){var e=this.orders.editedItem.meta.tax_day*this.orders.editedItem.total_pay,t=.16*e;e+=t;var r=new Intl.NumberFormat("es-ES",{style:"currency",currency:"VES"});return r.format(e)},GradesAverage(){var e=0,t=0;if(this.grades.items.forEach(r=>{null!==r.score&&(e+=parseInt(r.score),t++)}),t>0){var r=Math.round(e/t);return`Promedio de puntuación: ${r}`}return""}},created(){check_google_user(),this.initialize(),this.loadCountries(),this.loadMyCourses(),this.children.load(),this.loadNewCourses(),this.loadComingClasses(),this.loadMyOrders()},watch:{profile_container(e){e&&(this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1,this.getCountryID(),this.getStateID()},courses_container(e){e&&(this.profile_container&&(this.profile_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},orders_container(e){e&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},grades_container(e){e&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},children_container(e){e&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1)),this.alert=!1}},mounted(){},methods:{initialize(){var e=this,t=api_url+"members/get/"+uid;null!=e.sidebar_tab&&(e[e.sidebar_tab]=!0),e.$http.get(t).then(t=>{t.body.length>0&&(e.profile=t.body[0],e.profile.old_avatar=e.profile.avatar,e.preview_avatar_image=e.profile.avatar,e.profile.user_id=uid)},e=>{})},loadMyCourses(){var e=this,t=api_url+"courses/get-my-courses/"+uid;e.my_courses_loading=!0,e.$http.get(t).then(t=>{t.body.length>0&&(e.my_courses=t.body),e.my_courses_loading=!1},t=>{e.my_courses_loading=!1})},loadMyGrades(){var e=this,t=api_url+"lesson-quizzes/get-my-grades/"+e.grades.course.course_id;e.grades.loading=!0,e.grades.items=[],e.$http.post(t).then(t=>{t.body.length>0&&(e.grades.items=t.body),e.grades.loading=!1},t=>{e.grades.loading=!1})},loadMyOrders(){var e=this,t=api_url+"orders/get-my-orders/"+uid;e.my_orders_loading=!0;var r=Intl.DateTimeFormat().resolvedOptions();e.$http.post(t,{timezone:r.timeZone}).then(t=>{t.body.length>0&&(e.orders.items=t.body),e.my_orders_loading=!1},t=>{e.my_orders_loading=!1})},loadNewCourses(){var e=this,t=api_url+"courses/get-new-courses";e.new_courses_loading=!0,e.$http.get(t).then(t=>{t.body.length>0&&(e.new_courses=t.body),e.new_courses_loading=!1},t=>{e.new_courses_loading=!1})},loadComingClasses(){var e=this,t=api_url+"courses/get-coming-live-classes";e.$http.get(t).then(t=>{t.body.length>0&&(e.coming_classes=t.body)},e=>{})},saveProfile(){var e=this;e.active=!1,e.edit_profile_loading=!0;var t=api_url+"members/update-profile";e.$http.post(t,e.profile).then(t=>{e.alert=!0,e.alert_type=t.body.status,e.alert_message=t.body.message,e.edit_profile_loading=!1},e=>{})},loadCountries(){this.$http.get(domain+"/countries.min.json").then(e=>{this.countries=e.body.countries},e=>{}),this.$http.get(domain+"/states.min.json").then(e=>{this.states=e.body.states},e=>{})},filterStates(){var e=this.states,t=this.profile.country_selected,r=e.filter(e=>e.id_country==t);return this.country_states=r},getCountryName(){var e=this,t=e.countries,r=e.profile.country_selected,a=t.filter(e=>e.id==r);return e.profile.meta.country=a[0].name},getStateName(){var e=this,t=e.states,r=e.profile.state_selected,a=t.filter(e=>e.id==r);return e.profile.meta.state=a[0].name},getCountryID(){var e=this,t=e.countries,r=e.profile.meta.country,a=t.filter(e=>e.name==r);return e.profile.country_selected=a[0].id},getStateID(){var e=this;e.filterStates();var t=e.states,r=e.profile.meta.state,a=t.filter(e=>e.name==r);return e.profile.state_selected=a[0].id},getInput(e,t){this.telephone=t.number.international},previewOrderItem(e){this.orders.editedIndex=this.orders.items.indexOf(e),this.orders.editedItem=Object.assign({},e),this.dialogOrderPreview=!0},getOrderStatus(e){switch(parseInt(e)){case 0:return{color:"warning",name:"Prelucrare"};case 1:return{color:"success",name:"Aprobat"};case 2:return{color:"error",name:"Respinsă"}}},getLocation(){this.getCountryName(),this.getStateName()},prevImage(e){var t=this;const r=e.target.files[0],a=new FileReader;a.readAsDataURL(r),a.onload=(e=>{t.profile.avatar=r,t.preview_avatar_image=e.target.result,t.image_btns=!0})},undoImagePreview(){var e=this;e.preview_avatar_image=e.old_avatar,e.image_btns=!1,e.image_upload_btn=!1},updateAvatarImage(){var e=this;let t=new FormData;e.avatar_loading=!0,t.append("avatar",e.profile.avatar),t.append("old_avatar",e.profile.old_avatar);var r=api_url+"members/update-avatar";e.$http.post(r,t).then(t=>{e.avatar_loading=!1,e.snackbar=!0,e.snackbar_text=t.body.message,"success"==t.body.status&&(e.profile.avatar=t.body.data.avatar,e.profile.old_avatar=t.body.data.avatar,e.preview_avatar_image=t.body.data.avatar,e.image_upload_btn=!1,e.image_btns=!1)},t=>{e.snackbar=!0,e.snackbar_text="Eroare neașteptată, încercați din nou",e.avatar_loading=!1})},checkPasswords(){var e=this;return e.profile.password_confirm==e.profile.password}}});