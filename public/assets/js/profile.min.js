Vue.use(VueTelInputVuetify,{vuetify:vuetify});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{tab:null,nav_tab:null,sidebar_tab:url_params.get("tab"),birthdate_modal:null,image_btns:!1,image_upload_btn:!1,profile_container:!1,courses_container:!1,courses_container:!1,orders_container:!1,grades_container:!1,children_container:!1,main_container:!0,dialogOrderPreview:!1,loading:!1,avatar_loading:!1,edit_profile_loading:!1,my_courses_loading:!1,my_orders_loading:!1,new_courses_loading:!1,snackbar:!1,snackbar_timeout:4e3,selection:1,snackbar_text:"",telephone:"",alert:!1,alert_type:"",alert_message:"",preview_avatar_image:"",notifications:[],countries:[],country_states:[],coming_classes:[],my_courses:[],new_courses:[],orders:{items:[],headers:[{text:"ID",align:"start",value:"order_id"},{text:"Data",align:"start",value:"registered_at"},{text:"Suma",align:"start",value:"amount"},{text:"Metoda de plată",align:"start",value:"payment_method"},{text:"Stat",align:"start",value:"status"},{text:"Acțiune",value:"actions",align:"center",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{}},grades:{dialog:!1,loading:!1,headers:[{text:"Test",align:"start",value:"lesson_name"},{text:"Scor",align:"start",value:"score"},{text:"Stare",align:"center",value:"approved"},{text:"Acțiune",align:"center",value:"action"}],course:{},items:[],editedItem:{}},child_selected:{},children:new Children({uid:uid}),profile:{first_name:"",last_name:"",email:"",birthdate:"",gender:"",country_selected:"",state_selected:"",password:"",meta:[]},validations:validations,genders:[{text:"Bărbat",value:"M"},{text:"Femeie",value:"F"}],password_confirm:""},computed:{full_name(){if(this.profile.hasOwnProperty("first_name")&&this.profile.hasOwnProperty("last_name"))return this.profile.first_name+" "+this.profile.last_name},location(){return this.profile.meta.country+", "+this.profile.meta.state},GradesAverage(){var grades=0,total_grades=0,grade_average;return this.grades.items.forEach(item=>{null!==item.score&&(grades+=parseInt(item.score),total_grades++)}),total_grades>0?`Promedio de puntuación: ${Math.round(grades/total_grades)}`:""}},created(){check_google_user(),this.initialize(),this.loadCountries(),this.children.load(),this.loadNewCourses(),this.loadComingClasses(),this.loadMyOrders()},watch:{profile_container(val){val&&(this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1,this.getCountryID(),this.getStateID()},courses_container(val){val&&(this.profile_container&&(this.profile_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},orders_container(val){val&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.grades_container&&(this.grades_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},grades_container(val){val&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.children_container&&(this.children_container=!1)),this.alert=!1},children_container(val){val&&(this.profile_container&&(this.profile_container=!1),this.courses_container&&(this.courses_container=!1),this.orders_container&&(this.orders_container=!1),this.grades_container&&(this.grades_container=!1)),this.alert=!1}},mounted(){},methods:{initialize(){var app=this,url=api_url+"members/get/"+uid;null!=app.sidebar_tab&&(app[app.sidebar_tab]=!0),app.$http.get(url).then(res=>{res.body.length>0&&(app.profile=res.body[0],app.profile.old_avatar=app.profile.avatar,app.preview_avatar_image=app.profile.avatar,app.profile.user_id=uid)},err=>{})},loadMyCourses(){var app=this,url=api_url+"child-courses/get/"+app.child_selected.children_id;app.my_courses_loading=!0,app.my_courses=[],app.$http.get(url).then(res=>{res.body.length>0&&(app.my_courses=res.body),app.my_courses_loading=!1},err=>{app.my_courses_loading=!1})},loadMyGrades(){var app=this,url=api_url+"lesson-quizzes/get-my-grades/"+app.grades.course.course_id;app.grades.loading=!0,app.grades.items=[],app.$http.post(url).then(res=>{res.body.length>0&&(app.grades.items=res.body),app.grades.loading=!1},err=>{app.grades.loading=!1})},loadMyOrders(){var app=this,url=api_url+"orders/get-my-orders/"+uid;app.my_orders_loading=!0;var clientDateTime=Intl.DateTimeFormat().resolvedOptions();app.$http.post(url,{timezone:clientDateTime.timeZone}).then(res=>{res.body.length>0&&(app.orders.items=res.body),app.my_orders_loading=!1},err=>{app.my_orders_loading=!1})},loadNewCourses(){var app=this,url=api_url+"courses/get-new-courses";app.new_courses_loading=!0,app.$http.get(url).then(res=>{res.body.length>0&&(app.new_courses=res.body),app.new_courses_loading=!1},err=>{app.new_courses_loading=!1})},loadComingClasses(){var app=this,url=api_url+"courses/get-coming-live-classes";app.$http.get(url).then(res=>{res.body.length>0&&(app.coming_classes=res.body)},err=>{})},saveProfile(){var app=this;app.active=!1,app.edit_profile_loading=!0;var url=api_url+"members/update-profile";app.$http.post(url,app.profile).then(res=>{app.alert=!0,app.alert_type=res.body.status,app.alert_message=res.body.message,app.edit_profile_loading=!1},err=>{})},loadCountries(){this.$http.get(domain+"/countries.min.json").then(res=>{this.countries=res.body.countries},err=>{}),this.$http.get(domain+"/states.min.json").then(res=>{this.states=res.body.states},err=>{})},filterStates(){var states=this.states,country=this.profile.country_selected,results=states.filter(state=>state.id_country==country);return this.country_states=results},getCountryName(){var app=this,countries=app.countries,country_selected=app.profile.country_selected,results=countries.filter(country=>country.id==country_selected);return app.profile.meta.country=results[0].name},getStateName(){var app=this,states=app.states,state_selected=app.profile.state_selected,results=states.filter(state=>state.id==state_selected);return app.profile.meta.state=results[0].name},getCountryID(){var app=this,countries=app.countries,country_selected=app.profile.meta.country,results=countries.filter(country=>country.name==country_selected);return app.profile.country_selected=results[0].id},getStateID(){var app=this;app.filterStates();var states=app.states,state_selected=app.profile.meta.state,results=states.filter(state=>state.name==state_selected);return app.profile.state_selected=results[0].id},getInput(text,data){this.telephone=data.number.international},previewOrderItem(item){this.orders.editedIndex=this.orders.items.indexOf(item),this.orders.editedItem=Object.assign({},item),this.dialogOrderPreview=!0},getOrderStatus(status){switch(parseInt(status)){case 0:return{color:"warning",name:"Prelucrare"};case 1:return{color:"success",name:"Aprobat"};case 2:return{color:"error",name:"Respinsă"};case 3:return{color:"primary",name:"Rambursat"}}},getLocation(){this.getCountryName(),this.getStateName()},prevImage(e){var app=this;const image=e.target.files[0],reader=new FileReader;reader.readAsDataURL(image),reader.onload=e=>{app.profile.avatar=image,app.preview_avatar_image=e.target.result,app.image_btns=!0}},undoImagePreview(){var app=this;app.preview_avatar_image=app.old_avatar,app.image_btns=!1,app.image_upload_btn=!1},updateAvatarImage(){var app=this;let data=new FormData;app.avatar_loading=!0,data.append("avatar",app.profile.avatar),data.append("old_avatar",app.profile.old_avatar);var url=api_url+"members/update-avatar";app.$http.post(url,data).then(res=>{app.avatar_loading=!1,app.snackbar=!0,app.snackbar_text=res.body.message,"success"==res.body.status&&(app.profile.avatar=res.body.data.avatar,app.profile.old_avatar=res.body.data.avatar,app.preview_avatar_image=res.body.data.avatar,app.image_upload_btn=!1,app.image_btns=!1)},err=>{app.snackbar=!0,app.snackbar_text="Eroare neașteptată, încercați din nou",app.avatar_loading=!1})},checkPasswords(){var app=this;return app.profile.password_confirm==app.profile.password}}});