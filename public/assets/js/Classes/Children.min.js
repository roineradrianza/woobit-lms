class Children{constructor({uid:e=""}){this.uid=e,this.alert=!0,this.alert_type="",this.alert_message="",this.dialog=!1,this.delete_dialog=!1,this.loading=!1,this.children_courses_loading=!1,this.form=!0,this.child={first_name:"",last_name:"",gender:"",birthdate:moment().format("YYYY-MM-DD")},this.default={first_name:"",last_name:"",gender:"",user_id:this.uid,birthdate:moment().format("YYYY-MM-DD")},this.index=-1,this.children_courses=[],this.items=[]}reset(){this.loading=!1,this.alert=!1,this.child=Object.assign({},this.default),this.index=-1}load(){var e=this,s=api_url+"children/get/"+this.uid;e.loading=!0,Http.get(s).then(s=>{s.length>0&&(e.items=s,e.loadChildrenCourses()),e.loading=!1},s=>{e.response({type:"error"})})}loadChildrenCourses(){var e=this,s=api_url+"child-courses/get-latest",t=[];e.items.forEach(e=>{t.push(e.children_id)}),e.children_courses_loading=!0,Http.post(s,t).then(s=>{s.length>0&&(e.children_courses=s),e.children_courses_loading=!1},s=>{e.response({type:"error"})})}save(){var e=this;if(e.active=!1,e.loading=!0,e.index>=0){var s=api_url+"children/update";Http.put(s,e.child).then(s=>{e.response(s.status,s.message),"success"==s.status&&(e.items[e.index]=Object.assign({},e.child)),e.dialog=!1,e.reset()},s=>{e.response("error")})}else{s=api_url+"children/create";Http.post(s,e.child).then(s=>{e.response(s.status,s.message),"success"==s.status&&(e.child.children_id=s.data.id,e.items.push(e.child)),e.dialog=!1,e.reset()},s=>{e.response("error")})}}delete(){var e=this;e.active=!1,e.loading=!0;var s=api_url+"children/delete";Http.delete(s,e.child).then(s=>{e.response(s.status,s.message),"success"==s.status&&(e.items.splice(1,e.index),e.delete_dialog=!1,e.reset())},s=>{e.response("error")})}response(e="",s=""){this.loading=!1,this.alert=!0,this.alert_type=e,this.alert_message="error"==e&&""==s?"A apărut o eroare neașteptată, vă rugăm să încercați din nou.":s}editDialog(e){this.child=Object.assign({},e),this.index=this.items.indexOf(e),this.dialog=!0}deleteDialog(e){this.child=Object.assign({},e),this.index=this.items.indexOf(e),this.delete_dialog=!0}getAge(e){return moment().diff(e,"years")}}