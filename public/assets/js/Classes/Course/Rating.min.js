class Rating{constructor({course_id:course_id=""}){this.course_id=course_id,this.alert=!0,this.alert_type="",this.alert_message="",this.snackbar=!1,this.snackbar_timeout=3e3,this.snackbar_text="",this.dialog=!1,this.delete_dialog=!1,this.loading=!1,this.items_loading=!1,this.form=!0,this.my_rating={},this.items=[],this.loading=!1,this.form_valid=!0,this.form_loading=!1,this.myCommentIsPublished=!1,this.form_rules={comment:[v=>!!v||"Ești obligat să scrii un comentariu",v=>v&&v.length>=10||"Trebuie să fie un comentariu mai lung de 10 caractere"]},this.form={comment:"",stars:5},this.defaultForm={comment:"",stars:5},this.index=-1,this.items=[],this.load()}reset(){this.loading=!1,this.alert=!1,this.message=Object.assign({},this.default),this.index=-1}load(){var app=this,url=api_url+"course-ratings/get/"+app.course_id;if(app.loading=!0,Http.get(url).then(res=>{app.items=res,app.loading=!1},err=>{app.loading=!1}),"undefined"!=typeof basic_info){var url=api_url+"course-ratings/get-mine/"+app.course_id;app.loading=!0,Http.post(url).then(res=>{res.length>0&&(app.myCommentIsPublished=!0,res[0].stars=parseInt(res[0].stars),app.my_rating=res[0]),app.loading=!1},err=>{app.loading=!1})}}save(){var app=this;app.active=!1,app.form_loading=!0;var data={course_id:app.course_id,comment:app.form.comment,stars:app.form.stars},url=api_url+"course-ratings/create";Http.post(url,data).then(res=>{app.form_loading=!1,app.response(res.status,res.message),"success"==res.status&&(data.published_at=moment().format("YYYY-MM-DD h:mm:ss"),data.course_rating_id=res.data.course_rating_id,app.my_rating=data,app.myCommentIsPublished=!0)},err=>{app.form_loading=!1,app.response("error")})}deleteItem(item,index){var app=this,url=api_url+"course-ratings/delete";Http.post(url,{course_rating_id:item.course_rating_id}).then(res=>{app.response(res.status,res.message),"success"==res.status&&app.items.splice(index,1)},err=>{app.response("error")})}editMyRating(){var app=this,url=api_url+"course-ratings/update";app.form_loading=!0,app.form.course_id=app.course_id,Http.post(url,app.form).then(res=>{app.form_loading=!1,app.response(res.status,res.message),"success"==res.status&&(app.my_rating=app.form,app.myCommentIsPublished=!0)},err=>{app.form_loading=!1,app.response("error")})}deleteMyRating(){var app=this,url=api_url+"course-ratings/delete";Http.post(url,{course_rating_id:app.my_rating.course_rating_id}).then(res=>{app.response(res.status,res.message),"success"==res.status&&(app.myCommentIsPublished=!1,app.my_rating={},app.form=Object.assign({},app.defaultForm))},err=>{app.response("error")})}response(type="",message=""){this.loading=!1,this.alert=!0,this.alert_type=type,this.snackbar=!0,this.snackbar_timeout=3e3,this.alert_message,this.snackbar_text=message}editDialog(item){this.message=Object.assign({},item),this.index=this.items.indexOf(item),this.dialog=!0}deleteDialog(item){this.message=Object.assign({},item),this.index=this.items.indexOf(item),this.delete_dialog=!0}fromNow(date){return moment(date).fromNow()}formatDate(date,format){return moment(date).format(format)}}