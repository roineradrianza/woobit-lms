class LessonMessage{constructor({uid:s="",lesson_id:e=""}){this.lesson_id=e,this.uid=s,this.alert=!0,this.alert_type="",this.alert_message="",this.snackbar=!1,this.snackbar_timeout=3e3,this.snackbar_text="",this.dialog=!1,this.delete_dialog=!1,this.loading=!1,this.items_loading=!1,this.form=!0,this.message={message:"",lesson_id:this.lesson_id,user_id:this.uid,created_at:moment()},this.default={message:"",lesson_id:this.lesson_id,user_id:this.uid,created_at:moment()},this.index=-1,this.items=[]}reset(){this.loading=!1,this.alert=!1,this.message=Object.assign({},this.default),this.index=-1}load(){var s=this,e=api_url+"lesson-messages/get/"+this.lesson_id;s.loading=!0,Http.get(e).then(e=>{e.length>0&&(s.items=e),s.loading=!1},e=>{s.response({type:"error"})})}save(){var s=this;if(s.active=!1,s.loading=!0,""==s.message.message)return s.response("error","CÃ¢mpul mesajului nu poate fi gol"),!1;if(s.index>=0){var e=api_url+"lesson-messages/update";Http.put(e,s.message).then(e=>{s.response(e.status,e.message),"success"==e.status&&s.load(),s.dialog=!1,s.reset()},e=>{s.response("error")})}else{e=api_url+"lesson-messages/create";Http.post(e,s.message).then(e=>{s.response(e.status,e.message),"success"==e.status&&(s.message.lesson_message_id=e.data.id,s.items.unshift(s.message)),s.dialog=!1,s.reset()},e=>{s.response("error")})}}deleteItem(){var s=this;s.active=!1,s.loading=!0;var e=api_url+"lesson-messages/delete";Http.delete(e,s.message).then(e=>{s.response(e.status,e.message),"success"==e.status&&(s.load(),s.delete_dialog=!1,s.reset())},e=>{s.response("error")})}response(s="",e=""){this.loading=!1,this.alert=!0,this.alert_type=s,this.snackbar=!0,this.snackbar_timeout=3e3,this.alert_message,this.snackbar_text=e}editDialog(s){this.message=Object.assign({},s),this.index=this.items.indexOf(s),this.dialog=!0}deleteDialog(s){this.message=Object.assign({},s),this.index=this.items.indexOf(s),this.delete_dialog=!0}fromNow(s){return moment(s).fromNow()}}