Vue.use(VueTelInputVuetify,{vuetify:vuetify});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{tab:null,nav_tab:null,loading:!1,save_loading:!1,birthdate_modal:!1,valid:!1,alert:!1,alert_type:"",alert_message:"",telephone:"",states:[],country_states:[],countries:[],validations:validations,gender:[{text:"Omul",value:"M"},{text:"Femeie",value:"F"}],form:{},defaultItem:{username:"",first_name:"",last_name:"",avatar:"",last_name:"",birthdate:"",gender:"",email:"",country_selected:"",state_selected:"",password:"",password_confirm:"",meta:{student_type:"student",become_teacher:0}},valid:!0},computed:{},created(){this.init(),this.form=this.defaultItem,this.loadCountries()},mounted(){},methods:{init(){var e=this;gapi.load("client:auth2",()=>{gapi.client.init({apiKey:google_api_key,client_id:google_client_key,discoveryDocs:["https://people.googleapis.com/$discovery/rest?version=v1"],scope:"https://www.googleapis.com/auth/userinfo.profile"}).then(()=>{e.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())})})},validate(){return this.$refs.form.validate()},loadCountries(){this.$http.get(domain+"/countries.min.json").then(e=>{this.countries=e.body.countries},e=>{}),this.$http.get(domain+"/states.min.json").then(e=>{this.states=e.body.states},e=>{})},updateSigninStatus(e){e&&this.makeGoogleApiCall()},makeGoogleApiCall(){var e=this;e.save_loading=!0,e.alert=!1,gapi.client.people.people.get({resourceName:"people/me",personFields:"names,birthdays,photos,genders,emailAddresses,phoneNumbers,locations,addresses"}).then(t=>{var a=t.result,s={};s.gid=a.names[0].metadata.source.id,s.first_name=a.names[0].givenName,s.last_name=a.names[0].familyName,s.email=a.emailAddresses[0].value,s.gender=a.hasOwnProperty("genders")?e.formatGender(a.genders[0].value):"N",s.avatar=a.hasOwnProperty("photos")?a.photos[0].url:null;var i=api_url+"members/sign-in";e.$http.post(i,s).then(t=>{e.alert=!0,e.alert_message=t.body.message,e.alert_type=t.body.status,"success"==t.body.status&&(window.location=t.body.data),e.save_loading=!1},t=>{e.save_loading=!1})})},googleSignIn(){var e=this;gapi.auth2.getAuthInstance().signIn().then(t=>{e.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())})},filterStates(){var e=this.states,t=this.form.country_selected,a=e.filter(e=>e.id_country==t);return this.country_states=a},getCountryName(){var e=this,t=e.countries,a=e.form.country_selected,s=t.filter(e=>e.id==a);return e.form.meta.country=s[0].name},getStateName(){var e=this,t=e.states,a=e.form.state_selected,s=t.filter(e=>e.id==a);return e.form.meta.state=s[0].name},getLocation(){this.getCountryName(),this.getStateName()},getInput(e,t){this.telephone=t.number.international},save(){var e=this;if(e.alert=!1,e.validate(),e.validate()){e.save_loading=!0;var t=api_url+"members/register";e.form.meta.telephone=e.telephone,e.$http.post(t,e.form).then(t=>{e.save_loading=!1,e.alert=!0,e.alert_type=t.body.status,e.alert_message=t.body.message,"success"==t.body.status&&(window.location=domain+"/profile")},t=>{e.save_loading=!1,e.alert=!0,e.alert_type="error",e.alert_message="Eroare neașteptată, încercați din nou"})}else e.valid=!1},checkPasswords(){var e=this;return e.form.password_confirm==e.form.password},formatGender:e=>"male"==e?"M":"female"==e?"M":void 0}});