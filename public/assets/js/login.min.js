let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{redirect_url:url_params.get("redirect_url"),tab:null,nav_tab:null,dialog:!1,loading:!1,reset_loading:!1,alert:!1,alert_type:!1,alert_message:"",email:"",email_reset:"",password:""},computed:{},created(){this.init()},mounted(){},methods:{init(){var e=this;gapi.load("client:auth2",()=>{gapi.client.init({apiKey:google_api_key,client_id:google_client_key,discoveryDocs:["https://people.googleapis.com/$discovery/rest?version=v1"],scope:"https://www.googleapis.com/auth/userinfo.profile"}).then(()=>{e.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())})})},updateSigninStatus(e){e&&this.makeGoogleApiCall()},makeGoogleApiCall(){var e=this;e.loading=!0,e.alert=!1,gapi.client.people.people.get({resourceName:"people/me",personFields:"names,birthdays,photos,genders,emailAddresses,phoneNumbers,locations,addresses"}).then(a=>{var t=a.result,r={};r.gid=t.names[0].metadata.source.id,r.first_name=t.names[0].givenName,r.last_name=t.names[0].familyName,r.email=t.emailAddresses[0].value,r.gender=t.hasOwnProperty("genders")?e.formatGender(t.genders[0].value):"N",r.avatar=t.hasOwnProperty("photos")?t.photos[0].url:null;var s=api_url+"members/sign-in";e.$http.post(s,r).then(a=>{e.alert=!0,e.alert_message=a.body.message,e.alert_type=a.body.status,"success"==a.body.status&&(null!=e.redirect_url?window.location=e.redirect_url:window.location=a.body.data)},a=>{e.loading=!1,e.alert=!0,e.alert_message="A apărut o eroare neașteptată, vă rugăm să încercați din nou.",e.alert_type="error"}),e.loading=!1})},googleSignIn(){var e=this;gapi.auth2.getAuthInstance().signIn().then(a=>{e.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())})},fbLogin(){var e=this,a={},t=api_url+"members/sign-in";""!=FB.getUserID()?FB.api("/me?locale=ro_RO&fields=id, gender, name,email, first_name, last_name, picture.width(600)",r=>{e.loading=!0,a=r,a.facebook_id=a.id,a.avatar=a.picture.data.url,e.$http.post(t,a).then(a=>{e.alert=!0,e.alert_message=a.body.message,e.alert_type=a.body.status,e.loading=!1,"success"==a.body.status&&(null!=e.redirect_url?window.location=e.redirect_url:window.location=a.body.data)},a=>{e.loading=!1,e.alert=!0,e.alert_message="A apărut o eroare neașteptată, vă rugăm să încercați din nou.",e.alert_type="error"})}):FB.login(r=>{r.authResponse?FB.api("/me?locale=ro_RO&fields=id, gender, name,email, first_name, last_name, picture.width(600)",r=>{e.loading=!0,a=r,a.facebook_id=a.id,a.avatar=a.picture.data.url,e.$http.post(t,a).then(a=>{e.alert=!0,e.alert_message=a.body.message,e.alert_type=a.body.status,"success"==a.body.status&&(e.loading=!1,null!=e.redirect_url?window.location=e.redirect_url:window.location=a.body.data)},a=>{e.loading=!1,e.alert=!0,e.alert_message="A apărut o eroare neașteptată, vă rugăm să încercați din nou.",e.alert_type="error"})}):console.log("User cancelled login or did not fully authorize.")})},signIn(){var e=this;e.loading=!0,e.alert=!1;var a=api_url+"members/sign-in",t={email:e.email,password:e.password};e.$http.post(a,t).then(a=>{e.alert=!0,e.alert_message=a.body.message,e.alert_type=a.body.status,"success"==a.body.status&&(null!=e.redirect_url?window.location=e.redirect_url:window.location=a.body.data)},a=>{e.loading=!1,e.alert=!0,e.alert_message="A apărut o eroare neașteptată, vă rugăm să încercați din nou.",e.alert_type="error"}),e.loading=!1},resetPassword(){var e=api_url+"password/request-reset",a=this,t=a.email_reset;a.reset_loading=!0,a.alert=!1,a.$http.post(e,{email:t}).then(e=>{a.reset_loading=!1,a.alert_message=e.body.message,a.alert_type=e.body.status,a.alert=!0,a.dialog=!1},e=>{a.reset_loading=!1})},formatGender:e=>"male"==e?"M":"female"==e?"M":void 0}});