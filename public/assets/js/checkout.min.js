let vm=new Vue({vuetify:vuetify,el:"#full-learning-container",data:{already_paid:!1,loading:!1,loading_btn:!1,alert:!1,alert_type:!1,alert_message:!1,tab:null,nav_tab:null,notifications:[],course_id:url_params.get("course_id"),title:url_params.get("course"),extra:url_params.get("extra"),personal_info:basic_info,bs_bank_transfer:{},pagomovil:{},zelle:{},paypal:{},info:{course_id:"",total_pay:0,payment_method:"",meta:{ref:"",total_pay_bs:0,tax_day:0}}},computed:{FullName(){return this.personal_info.first_name+" "+this.personal_info.last_name},AmountWithIVA(){var e=this.info.meta.tax_day*this.info.total_pay,a=.16*e;e+=a;var t=new Intl.NumberFormat("es-ES",{style:"currency",currency:"VES"});return t.format(e)},AmountInBs(){var e=this.info.meta.tax_day*this.info.total_pay,a=new Intl.NumberFormat("es-ES",{style:"currency",currency:"VES"});return a.format(e)},Document(){return"Bank Transfer(Bs)"==this.info.payment_method?this.bs_bank_transfer.document_type+"-"+this.bs_bank_transfer.document_id:"PagoMovil"==this.info.payment_method?this.pagomovil.document_type+"-"+this.bs_bank_transfer.document_id:void 0}},created(){check_google_user()},mounted(){this.initialize()},methods:{initialize(){var e=this,a=api_url+"courses/get/"+e.course_id;e.checkout_loading=!0,e.$http.get(a).then(a=>{if(e.checkout_loading=!1,a.body.length>0){var t=a.body[0];e.info.course_id=e.course_id,e.info.type=1,"certified"==e.extra?(e.title="Certificado de "+e.title,e.info.type=2,e.info.total_pay=t.meta.certified_price):e.info.total_pay=t.price,e.getUSDtoBSTax(),e.getPaymentMethods(),e.fillPpCheckout()}},e=>{})},fillPpCheckout(){var e=this;total_pay=e.info.total_pay,pp_pay=Math.round(parseFloat(total_pay)+5.4*e.info.total_pay/100)+.3,paypal.Buttons({style:{color:"blue",shape:"pill",label:"pay",height:40},createOrder:(a,t)=>t.order.create({purchase_units:[{amount:{value:pp_pay,breakdown:{item_total:{value:pp_pay,currency_code:"USD"}}},items:[{name:e.title,unit_amount:{value:pp_pay,currency_code:"USD"},quantity:"1"}]}]}),onApprove:(a,t)=>t.order.capture().then(a=>{e.info.meta.pp_order_id=a.id,e.info.meta.pp_transaction_id=a.purchase_units[0].payments.captures[0].id,e.info.meta.pp_state=1,e.info.meta.total_paid=pp_pay,e.pay()})}).render("#paypal-button-container")},pay(){var e=this,a=e.info;switch(a.meta.total_pay_bs=e.info.meta.tax_day*e.info.total_pay,e.loading_btn=!0,a.meta.first_name=e.personal_info.first_name,a.meta.user_email=e.personal_info.email,a.meta.last_name=e.personal_info.last_name,a.meta.telephone=e.personal_info.telephone,a.meta.course=e.title,a.payment_method){case"Zelle":a.meta.email=e.zelle.email,a.meta.owner=e.zelle.owner;break;case"Bank Transfer(Bs)":a.meta.document=e.bs_bank_transfer.document_type+"-"+e.bs_bank_transfer.document_id,a.meta.owner=e.bs_bank_transfer.owner,a.meta.bank=e.bs_bank_transfer.bank,a.meta.bank_account=e.bs_bank_transfer.bank_account;break;case"PagoMovil":a.meta.document=e.pagomovil.document_type+"-"+e.pagomovil.document_id,a.meta.owner=e.pagomovil.owner,a.meta.bank=e.pagomovil.bank,a.meta.telephone=e.pagomovil.telephone}var t=api_url+"orders/create";e.$http.post(t,a).then(a=>{e.loading_btn=!1,e.alert=!0,e.alert_message=a.body.message,e.alert_type=a.body.status,"success"==a.body.status&&(e.already_paid=!0,window.location=domain+"/profile/?tab=orders_container")},a=>{e.loading_btn=!1})},getPaymentMethods(){var e=this,a=api_url+"payments/get";e.payment_loading=!0,e.$http.get(a).then(a=>{e.payment_loading=!1,a.body.forEach(a=>{switch(a.name){case"Zelle":e.zelle=a.meta;break;case"Bank Transfer(Bs)":e.bs_bank_transfer=a.meta;break;case"PagoMovil":e.pagomovil=a.meta}})},e=>{})},getUSDtoBSTax(){var e=this,a="https://s3.amazonaws.com/dolartoday/data.json";e.$http.get(a).then(a=>{a.body.hasOwnProperty("USD")&&(e.info.meta.tax_day=a.body.USD.dolartoday)},e=>{})},disableByPayment(){var e=this,a=e.info.payment_method;e.zelle,e.bs_bank_transfer;switch(a){case"Zelle":case"Bank Transfer(Bs)":case"PagoMovil":return""==e.info.meta.ref;case"Paypal":return!1;default:return!0}}}});