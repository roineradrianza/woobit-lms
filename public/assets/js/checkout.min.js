Vue.use(VueTelInputVuetify,{vuetify:vuetify});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{already_paid:!1,loading:!1,loading_btn:!1,alert:!1,alert_type:!1,alert_message:!1,tab:null,nav_tab:null,notifications:[],course_id:url_params.get("course_id"),title:url_params.get("course"),extra:url_params.get("extra"),personal_info:basic_info,paypal:{},info:{course_id:"",total_pay:0,payment_method:"Paypal",meta:{amount_in_usd:0,tax_day:0}}},computed:{FullName(){return this.personal_info.first_name+" "+this.personal_info.last_name},AmountInBs(){var e=this.info.meta.tax_day*this.info.total_pay,t=new Intl.NumberFormat("es-ES",{style:"currency",currency:"RON"});return t.format(e)}},created(){check_google_user()},mounted(){this.initialize(),this.getRONtoUSDTax()},methods:{initialize(){var e=this,t=api_url+"courses/get/"+e.course_id;e.checkout_loading=!0,e.$http.get(t).then(t=>{if(e.checkout_loading=!1,t.body.length>0){var a=t.body[0];e.info.course_id=e.course_id,e.info.type=1,e.info.total_pay=a.price}},e=>{})},fillPpCheckout(){var e=this;total_pay=e.info.total_pay,pp_pay=e.info.meta.amount_in_usd,paypal.Buttons({style:{color:"blue",shape:"pill",label:"pay",height:40},createOrder:(t,a)=>a.order.create({purchase_units:[{amount:{value:pp_pay,breakdown:{item_total:{value:pp_pay,currency_code:"USD"}}},items:[{name:e.title,unit_amount:{value:pp_pay,currency_code:"USD"},quantity:"1"}]}]}),onApprove:(t,a)=>a.order.capture().then(t=>{e.info.meta.pp_order_id=t.id,e.info.meta.pp_transaction_id=t.purchase_units[0].payments.captures[0].id,e.info.meta.pp_state=1,e.info.meta.total_paid=pp_pay,e.pay()})}).render("#paypal-button-container")},getInput(e,t){this.personal_info.telephone=t.number.international},pay(){var e=this,t=e.info;e.loading_btn=!0,t.meta.first_name=e.personal_info.first_name,t.meta.user_email=e.personal_info.email,t.meta.last_name=e.personal_info.last_name,t.meta.telephone=e.personal_info.telephone,t.meta.address=e.personal_info.address,t.meta.course=e.title;var a=api_url+"orders/create";e.$http.post(a,t).then(t=>{e.loading_btn=!1,e.alert=!0,e.alert_message=t.body.message,e.alert_type=t.body.status,"success"==t.body.status&&(e.already_paid=!0,window.location=domain+"/profile/?tab=orders_container")},t=>{e.loading_btn=!1})},getRONtoUSDTax(){var e=this,t=`https://freecurrencyapi.net/api/v2/latest?apikey=${free_currency_api_key}&base_currency=USD`;e.$http.get(t).then(t=>{t.body.data.hasOwnProperty("RON")&&(e.info.meta.tax_day=t.body.data.RON,e.info.meta.amount_in_usd=(parseInt(e.info.total_pay)/e.info.meta.tax_day).toFixed(2),e.fillPpCheckout())},e=>{})}}});