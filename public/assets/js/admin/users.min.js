Vue.use(VueTelInputVuetify,{vuetify:vuetify});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{loading:!1,table_loading:!1,drawer:!0,dialog:!1,valid:!1,dialogDelete:!1,birthdateDialog:!1,birthdate_modal:!1,modal:!1,selectedItem:8,states:[],country_states:[],countries:[],validations:validations,gender:[{text:"Hombre",value:"M"},{text:"Mujer",value:"F"},{text:"Prefiero no especificar",value:"N"}],headers:[{text:"Nombre completo",align:"start",value:"full_name"},{text:"Tipo de usuario",value:"user_type"},{text:"Correo electrÃ³nico",value:"email"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],members:[],user_types:["administrador","miembro"],editedIndex:-1,editedItem:{},defaultItem:{username:"",first_name:"",avatar:"",last_name:"",birthdate:"",gender:"",user_type:"",email:"",country:"",city:"",password:"",password_confirm:"",meta:{}}},computed:{formTitle(){return-1===this.editedIndex?"Registrar usuario":"Editar usuario"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){check_google_user(),this.editedItem=this.defaultItem,this.loadCountries(),this.initialize()},mounted(){},methods:{initialize(){var e=api_url+"members/get";this.table_loading=!0,this.$http.get(e).then(e=>{this.table_loading=!1,this.members=e.body},e=>{})},editItem(e){this.editedIndex=this.members.indexOf(e),this.editedItem=Object.assign({},e),this.getCountryID(),this.filterStates(),this.getStateID(),this.dialog=!0},deleteItem(e){this.editedIndex=this.members.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){var e=this.editedItem.user_id,t=api_url+"members/delete";this.$http.post(t,{user_id:e}).then(e=>{this.members.splice(this.editedIndex,1),this.closeDelete()},e=>{this.closeDelete()})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){var e=this,t=e.editedIndex,i=e.editedItem;if(e.editedIndex>-1){var s=api_url+"members/update";e.$http.post(s,i).then(s=>{"success"==s.body.status&&Object.assign(e.members[t],i),e.close()},e=>{})}else{s=api_url+"members/create";e.$http.post(s,i).then(t=>{i.date=current_date,"success"==t.body.status&&(i.user_id=t.body.data.user_id,e.members.push(i)),e.close()},t=>{e.close()})}},validate(){this.$refs.form.validate()},loadCountries(){this.$http.get(domain+"/countries.min.json").then(e=>{this.countries=e.body.countries},e=>{}),this.$http.get(domain+"/states.min.json").then(e=>{this.states=e.body.states},e=>{})},filterStates(){var e=this.states,t=this.editedItem.country_selected,i=e.filter(e=>e.id_country==t);return this.country_states=i},getCountryName(){var e=this,t=e.countries,i=e.editedItem.country_selected,s=t.filter(e=>e.id==i);return e.editedItem.meta.country=s[0].name},getStateName(){var e=this,t=e.states,i=e.editedItem.state_selected,s=t.filter(e=>e.id==i);return e.editedItem.meta.state=s[0].name},getCountryID(){var e=this,t=e.countries,i=e.editedItem.meta.country,s=t.filter(e=>e.name==i);return e.editedItem.country_selected=s[0].id},getStateID(){var e=this,t=e.states,i=e.editedItem.meta.state,s=t.filter(e=>e.name==i);return e.editedItem.state_selected=s[0].id},getLocation(){this.getCountryName(),this.getStateName()}}});