Vue.component("line-chart",{extends:VueChartJs.Bar,mixins:VueChartJs.mixins.reactiveProp,props:["chartdata","options"],mounted(){this.renderChart(this.chartdata,{responsive:!0,maintainAspectRatio:!0})}});let vm=new Vue({vuetify:vuetify,el:"#app-container",data:{nav_tab:null,notifications:[],loading:!1,search:"",courses:[],total_students:[],total_class_hours:0,chart:{loading:!1,monthly_data:{current_year:moment().format("YYYY"),months:["01","02","03","04","05","06","07","08","09","10","11","12"],labels:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],datasets:[{label:"Total ore",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]}]},weekly_data:{current_day:moment().format("YYYY-MM-DD"),labels:[],datasets:[{label:"Total ore",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]}]}},current_tz:moment.tz.guess()},computed:{},created(){window.onload=()=>{check_google_user()}},mounted(){this.initialize()},methods:{initialize(){var app=this,url=api_url+"courses/get-own-courses-and-lessons/"+uid;app.total_class_hours=0,app.courses=[],app.loading=!0,app.$http.get(url).then(res=>{res.body.length>0&&(res.body.forEach((course,course_index)=>{1!=course.status&&res.body.splice(course_index,1)}),app.courses=res.body)}).then(()=>{url=api_url+"courses/get-all-students/"+uid,app.$http.get(url).then(res=>{app.total_students=res.body,app.loading=!1,app.getTotalClassesHours()})})},getTotalClassesHours(){for(var app=this,i=0;i<8;i++)app.chart.weekly_data.labels[i]=moment(app.chart.weekly_data.current_day).subtract(7-i,"days").format("MM-DD");var lessons=[],current_date=moment();app.courses.forEach(course=>{course.lessons.forEach(lesson=>{lesson.meta.hasOwnProperty("zoom_date")&&moment(lesson.meta.zoom_date).isBefore(current_date)&&lesson.meta.hasOwnProperty("zoom_duration")&&void 0!==lesson.meta.zoom_duration&&""!=lesson.meta.zoom_duration&&(app.total_class_hours=app.total_class_hours+parseInt(lesson.meta.zoom_duration)),lessons.push(lesson)})}),app.total_class_hours=app.total_class_hours>0?parseFloat(app.total_class_hours/60).toFixed(1):0,app.chart.weekly_data.labels.forEach((e,i)=>{var filtered_date;app.chart.weekly_data.datasets[0].data[i]=0,lessons.filter(lesson=>lesson.meta.zoom_date==moment().format("YYYY-")+e).forEach(item=>{item.meta.hasOwnProperty("zoom_duration")&&void 0!==item.meta.zoom_duration&&""!=item.meta.zoom_duration&&(app.chart.weekly_data.datasets[0].data[i]=app.chart.weekly_data.datasets[0].data[i]+("undefined"==item.meta.zoom_duration?0:parseInt(item.meta.zoom_duration)))}),app.chart.weekly_data.datasets[0].data[i]=app.chart.weekly_data.datasets[0].data[i]>0?parseFloat(app.chart.weekly_data.datasets[0].data[i]/60).toFixed(2):0}),app.chart.monthly_data.months.forEach((e,i)=>{var filtered_month;app.chart.monthly_data.datasets[0].data[i]=0,lessons.filter(lesson=>moment(lesson.meta.zoom_date).format("YYYY-MM")==moment().format("YYYY-")+e).forEach(item=>{item.meta.hasOwnProperty("zoom_duration")&&void 0!==item.meta.zoom_duration&&""!=item.meta.zoom_duration&&(app.chart.monthly_data.datasets[0].data[i]=app.chart.monthly_data.datasets[0].data[i]+parseInt(item.meta.zoom_duration))}),app.chart.monthly_data.datasets[0].data[i]=app.chart.monthly_data.datasets[0].data[i]>0?parseFloat(app.chart.monthly_data.datasets[0].data[i]/60).toFixed(2):0}),void 0!==app.$refs.weekly_chart&&app.$refs.weekly_chart.renderChart(app.chart.weekly_data),void 0!==app.$refs.monthly_chart&&app.$refs.monthly_chart.renderChart(app.chart.monthly_data)},getTimeDifference(t,timezone){return moment(t).tz(timezone).diff(moment().tz(this.current_tz).format())},formatDate:(d,f)=>moment(d).format(f)}});